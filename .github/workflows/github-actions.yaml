name: Python Proj

on:
  push:
    branches:
      -main
  pull_request: 
    types: [closed]

# permission can be added at job level or workflow level
permissions:
  id-token: write   # This is required for requesting the JWT
  contents: read    # This is required for actions/checkout

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Configure AWS 
      uses: aws-actions/configure-aws-credentials@v3
      with:
        # aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
        # aws-secret-access-key-id: ${{ secrets.AWS_SECRET_ACCESS_KEY_ID }}
        role-to-assume: arn:aws:iam::339712864263:role/github-to-s3
        aws-region: ap-south-1  

    - name: Deploy code to S3 bucket
      run: aws s3 sync . s3://aniketbucket3 --delete

    # - name: Run Script to run python file
    #   run: 

    # - name: 
    
